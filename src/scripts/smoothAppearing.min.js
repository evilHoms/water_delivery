"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}"NodeList"in window&&!NodeList.prototype.forEach&&(console.info("polyfill for IE11"),NodeList.prototype.forEach=function(t,e){e=e||window;for(var i=0;i<this.length;i++)t.call(e,this[i],i,this)});var SmoothAppearing=function(){function t(){_classCallCheck(this,t),this.animationSpeed="1s",this.delay=500,this.ANIMATION_CLASSES=".appears-top, .appears-bottom, .appears-left, .appears-right, .appears-hidden",this.ANIMATION_CLASSES_ARRAY=["appears-top","appears-bottom","appears-left","appears-right","appears-hidden"],this.ANIMATION_STATES=["waiting","in_progress","ended"],this.SCROLL_Y={prev:window.scrollY,curr:window.scrollY,dir:void 0},this.animationElements,this.wrapper=this.wrapContent()}return _createClass(t,[{key:"wrapContent",value:function(){var t=document.createElement("div");return Array.from(document.body.children).forEach(function(e){t.appendChild(e)}),document.body.appendChild(t),t}},{key:"setWrapperStyle",value:function(t){t.style.height=document.documentElement.scrollHeight+"px",t.style.width=document.documentElement.scrollWidth+"px",t.style.overflow="hidden"}},{key:"appearsFromTop",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.animationSpeed,s=this.delay,a=(this.ANIMATION_CLASSES,this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),o=this.SCROLL_Y,r=function(i){t.style.position=null,t.style.top=null,t.style.transition=null,t.classList.remove("appears-top"),t._animationState=a[2],e.isAnimInProgress(e.animationElements)||e.clear()},l=t.getBoundingClientRect(),u=l.height,p=l.y,c=getComputedStyle(t),h=c.top,m=c.position;t._animationState=a[1];var d=i&&"up"===o.dir;switch(m){case"static":t.style.position="relative",t.style.top="-"+(d?window.innerHeight/3+u:p+u)+"px",setTimeout(function(){return t.style.transition="top "+n},1),setTimeout(function(){return t.style.top=0},s),setTimeout(r,1e3*parseFloat(n)*1.2+s),t.addEventListener("transitionend",r);break;case"fixed":case"absolute":case"relative":t.style.top="-"+(d?window.innerHeight/3+u-parseInt(h):p+u-parseInt(h))+"px",setTimeout(function(){return t.style.transition="top "+n},1),setTimeout(function(){return t.style.top=h},s),setTimeout(r,1e3*parseFloat(n)*1.2+s),t.addEventListener("transitionend",r)}}},{key:"appearsFromBottom",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.animationSpeed,s=this.delay,a=(this.ANIMATION_CLASSES,this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),o=this.SCROLL_Y,r=function(i){t.style.position=null,t.style.bottom=null,t.style.transition=null,t.classList.remove("appears-bottom"),t._animationState=a[2],e.isAnimInProgress(e.animationElements)||e.clear()},l=t.getBoundingClientRect(),u=(l.height,l.y),p=getComputedStyle(t),c=p.bottom,h=p.position,m=window.innerHeight;t._animationState=a[1];var d=i&&"down"===o.dir;switch(h){case"static":t.style.position="relative",t.style.bottom="-"+(d?1.7*m-u:m-u)+"px",setTimeout(function(){return t.style.transition="bottom "+n},1),setTimeout(function(){return t.style.bottom=0},s),setTimeout(r,1e3*parseFloat(n)*1.2+s),t.addEventListener("transitionend",r);break;case"relative":case"fixed":case"absolute":t.style.bottom="-"+(d?1.7*m-u:m-u+parseInt(c))+"px",setTimeout(function(){return t.style.transition="bottom "+n},1),setTimeout(function(){return t.style.bottom=c},s),setTimeout(r,1e3*parseFloat(n)*s),t.addEventListener("transitionend",r)}}},{key:"appearsFromLeft",value:function(t){var e=this,i=this.animationSpeed,n=this.delay,s=(this.ANIMATION_CLASSES,this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),a=(this.SCROLL_Y,function(i){t.style.position=null,t.style.left=null,t.style.transition=null,t.classList.remove("appears-left"),t._animationState=s[2],e.isAnimInProgress(e.animationElements)||e.clear()}),o=t.getBoundingClientRect(),r=o.width,l=o.x,u=getComputedStyle(t),p=u.left,c=u.position;window.innerWidth;switch(t._animationState=s[1],c){case"static":t.style.position="relative",t.style.left="-"+(l+r)+"px",setTimeout(function(){return t.style.transition="left "+i},1),setTimeout(function(){return t.style.left=0},n),setTimeout(a,1e3*parseFloat(i)*1.2+n),t.addEventListener("transitionend",a);break;case"relative":case"fixed":case"absolute":t.style.left="-"+(l+r+parseInt(p))+"px",setTimeout(function(){return t.style.transition="left "+i},1),setTimeout(function(){return t.style.left=p},n),setTimeout(a,1e3*parseFloat(i)*1.2+n),t.addEventListener("transitionend",a)}}},{key:"appearsFromRight",value:function(t){var e=this,i=this.animationSpeed,n=this.delay,s=(this.ANIMATION_CLASSES,this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),a=(this.SCROLL_Y,function(i){t.style.position=null,t.style.right=null,t.style.transition=null,t.classList.remove("appears-right"),t._animationState=s[2],e.isAnimInProgress(e.animationElements)||e.clear()}),o=t.getBoundingClientRect(),r=(o.width,o.x),l=getComputedStyle(t),u=l.right,p=l.position,c=window.innerWidth;switch(t._animationState=s[1],p){case"static":t.style.position="relative",t.style.right="-"+(c-r)+"px",setTimeout(function(){return t.style.transition="right "+i},1),setTimeout(function(){return t.style.right=0},n),setTimeout(a,1e3*parseFloat(i)*1.2+n),t.addEventListener("transitionend",a);break;case"relative":case"fixed":case"absolute":t.style.right="-"+(c-r-parseInt(u))+"px",setTimeout(function(){return t.style.transition="right "+i},1),setTimeout(function(){return t.style.right=u},n),setTimeout(a,1e3*parseFloat(i)*1.2+n),t.addEventListener("transitionend",a)}}},{key:"appearsHidden",value:function(t){var e=this,i=this.animationSpeed,n=this.delay,s=(this.ANIMATION_CLASSES,this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),a=(this.SCROLL_Y,function(i){t.style.transition=null,t.classList.remove("appears-hidden"),t.style.opacity=null,t._animationState=s[2],e.isAnimInProgress(e.animationElements)||e.clear()});t._animationState=s[1],t.style.opacity=0,setTimeout(function(){return t.style.transition="opacity "+i},1),setTimeout(function(){return t.style.opacity=1},n),setTimeout(a,1e3*parseFloat(i)*1.2+n),t.addEventListener("transitionend",a)}},{key:"isAnimInProgress",value:function(t){var e=this;return t.forEach(function(t){if(t._animationState===e.ANIMATION_STATES[1])return!0}),!1}},{key:"clear",value:function(){this.wrapper.style.overflow=null,this.wrapper.style.width=null,this.wrapper.style.height=null}},{key:"initElements",value:function(t){var e=this;t.forEach(function(t){t._animationState=e.ANIMATION_STATES[0],t._animationType=e.ANIMATION_CLASSES_ARRAY.find(function(e){return t.classList.contains(e)})})}},{key:"animateElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.ANIMATION_CLASSES_ARRAY;switch(t._animationType){case i[0]:this.appearsFromTop(t,e);break;case i[1]:this.appearsFromBottom(t,e);break;case i[2]:this.appearsFromLeft(t,e);break;case i[3]:this.appearsFromRight(t,e);break;case i[4]:this.appearsHidden(t,e)}}},{key:"runAnimation",value:function(t,e){var i=this,n=this.animationSpeed,s=this.ANIMATION_CLASSES;this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES,this.SCROLL_Y;t&&(this.animationSpeed="number"==typeof t?t/1e3+"s":t),this.delay=e||this.delay;this.delay;var a=document.querySelectorAll(s);this.animationElements=a,this.initElements(a),this.setWrapperStyle(this.wrapper),a.forEach(function(t){return i.animateElement(t)}),setTimeout(function(){return i.clear},1e3*parseInt(n))}},{key:"runAnimationOnScroll",value:function(t,e){var i=this,n=(this.animationSpeed,this.ANIMATION_CLASSES),s=(this.ANIMATION_CLASSES_ARRAY,this.ANIMATION_STATES),a=this.SCROLL_Y,o=!1,r=function(t){a.prev=a.curr,a.curr=window.scrollY,a.dir=a.curr>a.prev?"down":a.curr<a.prev?"up":void 0,l.forEach(function(t){t.getBoundingClientRect().y<window.innerHeight&&t._animationState===s[0]&&t.getBoundingClientRect().y+t.getBoundingClientRect().height>0&&(i.setWrapperStyle(i.wrapper),i.animateElement(t,o))}),o=!0};t&&(this.animationSpeed="number"==typeof t?t/1e3+"s":t),this.delay=e||this.delay;this.delay;var l=document.querySelectorAll(n);this.animationElements=l,this.initElements(l),r(),window.addEventListener("scroll",r)}}]),t}();